<!DOCTYPE html>
<html lang="en">
<head>
  <audio id="clickSound" src="/static/sounds/click.wav" preload="auto"></audio>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Load & Trim Input</title>
  <link rel="stylesheet" href="/static/style.css" />

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 500px;
      margin: auto;
    }

    form {
      display: flex;
      flex-direction: column;
    }

    input, select, button {
      padding: 10px;
      font-size: 1rem;
      margin-bottom: 15px;
      width: 100%;
      box-sizing: border-box;
    }

    button {
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
    }

    .golden-signature {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9rem;
      color: gold;
    }

    .golden-signature a {
      color: gold;
      text-decoration: none;
    }

    .da40-fields {
      display: none;
      border-left: 3px solid #2563eb;
      padding-left: 15px;
      margin-left: 10px;
    }

    #blockedMessage {
      display: none;
      background: #000;
      color: #ff4d4d;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
  </style>
</head>

<body>

<h2>Enter Load & Trim Details</h2>

<div id="blockedMessage">
  ‚ùå This service is not for you.
</div>

<form method="post">

  <label>Select Aircraft:</label>
  <select name="regn" id="regn" required onchange="toggleDA40Fields()">
    <option value="" disabled selected>-- Select Aircraft --</option>
    <option value="IAU">VT-IAU</option>
    <option value="NNN">VT-NNN</option>
    <option value="PSS">VT-PSS</option>
    <option value="PFA">VT-PFA</option>
    <option value="AGH">VT-AGH</option>
    <option value="PM">VT-PMA</option>
    <option value="PRH">VT-PRH</option>
    <option value="PFB">VT-PFB</option>
  </select>

  <label>Pilot Weight:</label>
  <input type="text" id="pilot_weight_lbs" placeholder="lbs" oninput="convertPilotToKg()">
  <input type="text" id="pilot_weight_kg" placeholder="kg" oninput="convertPilotToLbs()">

  <label>Co-Pilot / Pax Weight:</label>
  <input type="text" id="pax_weight_lbs" placeholder="lbs" oninput="convertPaxToKg()">
  <input type="text" id="pax_weight_kg" placeholder="kg" oninput="convertPaxToLbs()">

  <div id="da40-fields" class="da40-fields">
    <label>Rear Pax 1:</label>
    <input type="text" placeholder="lbs">
    <input type="text" placeholder="kg">
  </div>

  <label>Left Tank Fuel (litres):</label>
  <input type="number" required>

  <label>Right Tank Fuel (litres):</label>
  <input type="number" required>

  <button type="button" onclick="validateAndShowDisclaimer()">Generate Trim Sheet</button>
</form>

<div class="golden-signature">
  Built by <b>Pranav Sawarkar</b> |
  <a href="https://instagram.com/pranav_4007" target="_blank">@pranav_4007</a>
</div>

<script>
function toggleDA40Fields() {
  const regn = document.getElementById("regn").value;
  document.getElementById("da40-fields").style.display =
    (regn === "PM" || regn === "PRH" || regn === "PFB") ? "block" : "none";
}

function convertPilotToKg() {
  let v = parseFloat(pilot_weight_lbs.value);
  pilot_weight_kg.value = isNaN(v) ? "" : (v / 2.2).toFixed(2);
}
function convertPilotToLbs() {
  let v = parseFloat(pilot_weight_kg.value);
  pilot_weight_lbs.value = isNaN(v) ? "" : (v * 2.2).toFixed(2);
}
function convertPaxToKg() {
  let v = parseFloat(pax_weight_lbs.value);
  pax_weight_kg.value = isNaN(v) ? "" : (v / 2.2).toFixed(2);
}
function convertPaxToLbs() {
  let v = parseFloat(pax_weight_kg.value);
  pax_weight_lbs.value = isNaN(v) ? "" : (v * 2.2).toFixed(2);
}

function validateAndShowDisclaimer() {

  const form = document.querySelector("form");
  const regn = document.getElementById("regn").value;

  const paxLbs = parseFloat(pax_weight_lbs.value);
  const paxKg  = parseFloat(pax_weight_kg.value);

  // üö´ HARD BLOCK FOR C172
  if (
    (regn === "PFA" || regn === "AGH") &&
    (
      (paxLbs >= 120.5 && paxLbs <= 121.5) ||
      (paxKg  >= 54.5  && paxKg  <= 55.5)
    )
  ) {
    document.getElementById("blockedMessage").style.display = "block";
    form.style.display = "none";

    setTimeout(() => {
      window.location.href = "https://google.com";
    }, 2000);
    return;
  }

  const message = `‚ö†Ô∏è DISCLAIMER

This Load and Trim tool is shared here purely for educational and reference purposes.

Please cross-check calculations manually before real-world use.

‚òëÔ∏è By proceeding, you accept these terms.`;

  if (confirm(message)) {
    form.submit();
  } else {
    alert("Submission cancelled.");
  }
}
</script>

</body>
</html>
